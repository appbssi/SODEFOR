/**
 * @file Firestore Security Rules
 * @core-philosophy This ruleset enforces a public read-only model for personnel data,
 *  allowing anyone to read the list of personnel.
 *  Write operations are forbidden, as the application uses anonymous authentication.
 *  Attendance records are completely locked down for now, as the app uses anonymous authentication.
 * @data-structure
 *  - /personnel/{personnelId}: Stores information about each personnel member.
 *  - /attendance/{attendanceId}: Stores attendance records for each personnel member.
 * @key-security-decisions
 *  - Personnel data is publicly readable.
 *  - Write operations are disabled because anonymous authentication is being used.
 *  - Listing of personnel is public.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to personnel data.
     * @path /personnel/{personnelId}
     * @allow (get, list): Any user can read personnel data.
     * @deny (create, update, delete): No one can write personnel data.
     * @principle Public read, no writes allowed.
     */
    match /personnel/{personnelId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Attendance records are currently locked down.
     * @path /attendance/{attendanceId}
     * @allow (get, list): No one can read attendance records.
     * @deny (create, update, delete): No one can write attendance records.
     * @principle No access to attendance records.
     */
    match /attendance/{attendanceId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}