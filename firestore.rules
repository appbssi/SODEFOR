/**
 * @file Firestore Security Rules
 * @description This ruleset enforces a public read policy for attendance and personnel data, while restricting write access.
 *
 * Data Structure:
 * - /personnel/{personnelId}: Stores personnel information.
 * - /attendance/{attendanceId}: Stores attendance records.
 *
 * Key Security Decisions:
 * - Public Read Access: Both 'personnel' and 'attendance' collections are publicly readable.
 * - No Write Access: All write operations (create, update, delete) are explicitly denied. This ensures that only backend processes can modify the data.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to personnel data.
     * @path /personnel/{personnelId}
     * @allow (get, list) Any user can read personnel data.
     * @deny (create, update, delete) No user can create, update, or delete personnel data.
     * @principle Allows public read access to the personnel collection and restricts write access.
     */
    match /personnel/{personnelId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public read access to attendance data.
     * @path /attendance/{attendanceId}
     * @allow (get, list) Any user can read attendance data.
     * @deny (create, update, delete) No user can create, update, or delete attendance data.
     * @principle Allows public read access to the attendance collection and restricts write access.
     */
    match /attendance/{attendanceId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}